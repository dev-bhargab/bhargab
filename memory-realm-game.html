<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Realm Game</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #121212; color: #ffffff; }
        .realm { display: none; }
        .active { display: block; }
        .card { width: 100px; height: 100px; margin: 10px; display: inline-block; background-color: #1e1e1e; text-align: center; vertical-align: middle; line-height: 100px; cursor: pointer; }
        .matched { background-color: #4caf50; }
        .hidden { background-color: #f44336; }
    </style>
</head>
<body>
    <h1>Memory Realm Game</h1>
    <div id="gameContainer"></div>
    <div id="narrative"></div>
    <button id="startBtn">Start Game</button>

    <script>
        const realms = [
            { name: "Realm of Shadows", description: "Face your fears in the realm of shadows. Match the dark cards." },
            { name: "Realm of Light", description: "Illuminate your path in the realm of light. Match the shining cards." },
            { name: "Realm of Time", description: "Travel through time. Match the cards before you run out of time!" },
            { name: "Realm of Memory", description: "Unravel your deepest memories. Match the cards to uncover the truth." },
        ];

        let currentRealmIndex = 0;
        let cardValues = [];
        let matches = 0;
        let totalMatches = 0;

        function startGame() {
            document.getElementById("gameContainer").innerHTML = "";
            document.getElementById("narrative").innerHTML = realms[currentRealmIndex].description;
            showRealm(currentRealmIndex);
            createCards();
        }

        function showRealm(index) {
            const realm = realms[index];
            document.getElementById("gameContainer").innerHTML = `<h2>${realm.name}</h2>`;
        }

        function createCards() {
            // Create pairs of cards based on realm
            let cardPairs = Array.from({ length: 8 }, (_, i) => Math.floor(i / 2));
            cardPairs = shuffle(cardPairs);
            cardPairs.forEach(value => {
                const card = document.createElement("div");
                card.classList.add("card");
                card.dataset.value = value;
                card.innerHTML = "?";
                card.onclick = cardClicked;
                document.getElementById("gameContainer").appendChild(card);
            });
        }

        function cardClicked() {
            if (this.classList.contains("matched") || cardValues.length === 2) return;
            this.innerHTML = this.dataset.value;
            cardValues.push(this);
            if (cardValues.length === 2) {
                setTimeout(checkMatch, 1000);
            }
        }

        function checkMatch() {
            if (cardValues[0].dataset.value === cardValues[1].dataset.value) {
                cardValues[0].classList.add("matched");
                cardValues[1].classList.add("matched");
                matches++;
                if (matches === totalMatches) {
                    currentRealmIndex++;
                    if (currentRealmIndex < realms.length) {
                        startGame();
                    } else {
                        endGame();
                    }
                }
            } else {
                cardValues[0].innerHTML = "?";
                cardValues[1].innerHTML = "?";
            }
            cardValues = [];
        }

        function endGame() {
            document.getElementById("narrative").innerHTML = "Congratulations! You've completed all realms. But wait... was it all just a game? The AI has been watching you all along.";
            document.getElementById("gameContainer").innerHTML = "";
        }

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            totalMatches = array.length / 2;
            return array;
        }

        document.getElementById("startBtn").onclick = startGame;
    </script>
</body>
</html>